name: Fetch Private Questions

on:
  workflow_dispatch:   

jobs:
  sync-questions:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Public Repo
        uses: actions/checkout@v3

      - name: Clone Private Repo (temporary)
        run: |
          git clone https://$PRIVATE_PAT@github.com/saumyayadav25/DSAMate.git temp_private_repo
        env:
          PRIVATE_PAT: ${{ secrets.PRIVATE_PAT }}

      - name: Copy questions.ts for runtime
        run: |
          cp temp_private_repo/data/questions.ts data/questions.ts

      - name: Verify copy
        run: |
          ls -l data/
          echo "questions.ts replaced with private version for runtime"

      - name: Commit & Push updated questions.ts
        run: |
          git config user.name "github-actions"
          git config user.email "actions@github.com"
          git add data/questions.ts
          git commit -m "Update questions.ts from private repo" || echo "No changes to commit"
          git push origin main
